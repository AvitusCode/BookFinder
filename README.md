# BookFinder

## Содержание

- [Вступление](#introduction)
- [Входные/Выходные данные](#in/out_data)
- [Модель](#model)
- [Ограничения](#restrictions)

## Вступление
Программа пытается по изображению, на котором изображены стоящие на полке художественные книги, определить то, какие из них имеют экранизации. Также программа загружает информацию о группе пользователей со своими уникальными предпочтениями по простмотру фильмов. После чего сравнивает информацию о найденных экранизациях с пользовательскими предпочтениями, чтобы выдать список наиболее подходящих фильмов для совместного просмотра данной группой лиц. Фильмы в списке упорядочены от наиболее подходящего к наимению подходящему. Программа искользует KinopoiskAPi для сбора информации о фильмах, а также парсит информацию об экранизированных книгах с сайта livelib.

## Входные/Выходные данные
Имеется предварительно составленый список людей с набором предпочтений.

На вход программе поступает изображение с книгами, лежащими на полке. 
На выход программа выдает список экранизированных книг, упорядочивая в зависимости от сходства с пользовательскими предпочтениями. Если книги на изображении не найдены, или у них нет экранизации, то выдает информацию об отсутствии книг или их экранизации.
## Модель

a) Обработка изображения
1. Предобработка изображения, включающая уменьшение/увеличение размера, переход к бинарному формату (черно-белому цвету), применение фильтра Гаусса для избавления от шума.
2. Применение алгоритма Кенни для поиска границ, поиск компонент связанности, применение преобразования Хафа для поиска границ книг на полке.
3. Постобработка изображение, включающая отбраковку лишних линий, полученных посредством преобразования Хафа.
4. Выделение книг на изображении (предполагается, что книги имеют прямоугольную форму, поэтому мы можем их выделить с поиощью вышеописанных шагов)
5. Если книги найдены, то переходим к этапу b, иначе завершаем работу.

b) Поиск текста на изображении
1. Используем Tesseract для поиска текста на изображении (исследуется каждый отдельно выделенный пунктом a прямоугольник)
2. Если текст найден, то происходит сравнение текста со списком экранизированных книг на основе метода нечеткой логики (текст может распознаться лишь с определенным процентом точности, поэтому был выбран такой метод проверки).
3. Если есть совпадение, то происходит обращение к KiopoiskApi, чтобы загрузить информацию о фильме.
4. Если совпадений нет, то завершаем работу, иначе переходим к пунтку c.

с) Составление рейтинга
1. Из пользовательских данных и информации о фильмах выделяются фичи (рейтинг, год, жанры, страны, продолжительность). Для жанров и стран формируем вектор из нулей и единиц (1, если имеется нажный жанр, 0 - иначе)
2. На основе фичей вычисляется функция рейтинга f(x,y) = [(1- p1(x, y)) + (1 - p2(x, y)) + (1 - p3(x, y)) + p4(x, y) + p5(x, y)] / 5, f -> [0, 1]. p1-3 - это нормированные функции растояния для года, продолжительности и рейтинга, а p4-5 функции, вычислющие косинусное сходство между векторизованными фичами (жанр и страны).
3. Составляется рейтинг. Чем ближе функция к единице, тем лучше конкретный фильм подходит для просмотра.

В качестве опционального шага можно сформировать Базу знаний об экранизированных фильмах при помощи алгоритма парсинга данных с сайта livelib.

## Ограничения
1. Изображение должно содержать лежащие на полки книги. Книги должны быть повернуты к камере лицевой стороной или боковой коркой с инфориацией о содержимом (автор, название)
2. Необходимо, чтобы задний план, на котором расположены книги, был монохромным, в противном случае результат может быть некорректен.
3. Книги должны быть хорошо освещены и не быть пересвечены.
4. Одна фотография <-> одна книжная полка
5. Изображение должно быть приемлемого качество (минимум HD), формат jpg.

При нарушении условий не гарантируется выдача вменяемого ответа.
